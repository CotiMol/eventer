- @participant.errors.full_messages.each do |msg|
  .alert.alert-error
    %a.close{ "data-dismiss" => :alert, :href => "#" } &times;
    =msg

= form_for [:event, @participant] do |f|
  %fieldset.inputs
    .row-fluid
      .span12
        .control-group
          = f.text_field :fname, :class => "span12", :placeholder => t("formtastic.labels.participant.fname")
    .row-fluid
      .span12
        .control-group
          = f.text_field :lname, :class => "span12", :placeholder => t("formtastic.labels.participant.lname")
    .row-fluid
      .span12
        .control-group
          - email_placeholder = t("formtastic.labels.participant.email")
          - if @event.is_webinar? && @event.list_price == 0.0
            - email_placeholder += " (confirmaremos tu registro en este email)"
          = f.text_field :email, :class => "span12", :placeholder => email_placeholder
    .row-fluid
      .span12
        .control-group
          = f.text_field :phone, :class => "span12", :placeholder => t("formtastic.labels.participant.phone")
    .row_fluid
      = f.collection_select :influence_zone_id, @influence_zones, :id, :display_name, {include_blank: 'Tu lugar más próximo ...'}
    .row-fluid
      .span12
        .form-actions{ :style => "padding: 4px 20px 4px; margin-top: 0px;"}
          .text-right
            %img{ :src => "/assets/ajax-loader.gif", :id => "loader_img" }
            %button.btn.btn-primary{:name => "commit", :type => "submit", :style => "margin-top: 0px;"}
              %i.icon-save
              Registrarme

:javascript
  $(document).ready(function() {
    $('[name="commit"]').click( function() { setLoading() } );
    $("#loader_img").hide();
  })

  function setLoading() {
    $('[name="commit"]').val("Registro en progreso ...");
    $('[name="commit"]').attr('disabled','disabled');
    $('[name="commit"]').attr('class', 'btn btn-primary disabled');
    $("#loader_img").show();
    $("#new_participant").submit();
  }